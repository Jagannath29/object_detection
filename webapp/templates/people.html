<!-- People Counter Page - Minimal Dark Theme -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>People Counter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', Arial, sans-serif; }
    .accent {
      color: #38bdf8;
    }
    .accent-btn {
      background: #38bdf8;
      color: #fff;
      font-weight: 700;
      border: none;
    }
    .accent-btn:hover {
      background: #0ea5e9;
    }
    .dark-card {
      background: #23272f;
    }
    .dark-input {
      background: #18181b;
      color: #fff;
      border: 1.5px solid #23272f;
    }
    .dark-input:focus {
      border-color: #38bdf8;
      outline: none;
    }
    .dark-link {
      color: #b6c2e2;
      transition: color 0.2s;
    }
    .dark-link:hover {
      color: #38bdf8;
    }
  </style>
</head>
<body class="min-h-screen bg-[#18181b]">
  <div class="max-w-2xl mx-auto py-10 px-4">
    <a href="/" class="dark-link text-base font-semibold">&larr; Back to Dashboard</a>
    <div class="dark-card rounded-2xl p-8 mt-6 flex flex-col items-center">
      <h1 class="text-3xl font-bold mb-2 mt-2 accent">People Counter</h1>
      <p class="text-gray-200 mb-6 text-center">Detect and count people in your uploaded video. Powered by advanced AI object detection.</p>
      <form id="people-form" enctype="multipart/form-data" class="mb-2 w-full">
        <input type="file" name="file" accept="image/*,video/*" class="mb-2 block w-full dark-input rounded px-3 py-2" required>
        <button type="submit" class="accent-btn px-4 py-2 rounded transition w-full font-semibold mt-1">Run Detection</button>
      </form>
      <div id="people-status" class="mt-2 text-sm text-blue-300"></div>
      <div id="people-output" class="mt-4"></div>
    </div>
  </div>
  <script>
    // People Counter form logic
    document.getElementById('people-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const form = e.target;
      const data = new FormData(form);
      document.getElementById('people-status').textContent = 'Processing...';
      document.getElementById('people-output').innerHTML = `<div class=\"flex justify-center\"><svg class=\"animate-spin h-10 w-10 text-gray-400\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle><path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v8z\"></path></svg></div>`;
      fetch('/detect/people', { method: 'POST', body: data })
        .then(res => res.json())
        .then(res => {
          document.getElementById('people-status').textContent = res.status || '';
          if (res.output_url) {
            if (res.output_url.match(/\.(jpg|jpeg|png)$/i)) {
              document.getElementById('people-output').innerHTML = `<div class='bg-white rounded-xl shadow-lg p-4'><img src="${res.output_url}" class="max-w-full rounded shadow"></div>`;
            } else if (res.output_url.match(/\.(mp4|avi)$/i)) {
              document.getElementById('people-output').innerHTML = `<div class='bg-white rounded-xl shadow-lg p-4'><video src="${res.output_url}" controls class="max-w-full rounded shadow"></video></div>`;
            }
          }
          if ('count' in res) {
            document.getElementById('people-output').innerHTML += `<div class=\"mt-2 text-lg font-bold text-green-700\">People Count: ${res.count}</div>`;
          }
        })
        .catch(err => {
          document.getElementById('people-status').textContent = 'Error: ' + err;
          document.getElementById('people-output').innerHTML = '';
        });
    });
  </script>
</body>
</html>
